#!/bin/bash
# kubctl-0x01 - Scale Django app and monitor usage

set -e

echo "ğŸ“ˆ Scaling Django deployment to 3 replicas..."
kubectl scale deployment django-messaging-app --replicas=3

echo "ğŸ” Checking running pods..."
kubectl get pods -l app=django-messaging

echo "âš¡ Load testing with wrk..."
wrk -t2 -c50 -d30s http://$(minikube ip):$(kubectl get svc django-messaging-service -o=jsonpath='{.spec.ports[0].nodePort}')/

echo "ğŸ“Š Monitoring resource usage..."
kubectl top pods
